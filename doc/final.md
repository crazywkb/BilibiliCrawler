---
layout: page
mathjax: true
permalink: /2019/projects/p07/final/


---

## 基于用户行为和番剧特征的b站番剧推荐

#### 成员及分工

| 成员   | 分工                               |
| ------ | ---------------------------------- |
| 李嘉盛 | 系统设计，算法实现，文档编写       |
| 曹昊天 | 关联规则挖掘，数据分析，数据可视化 |
| 万凯斌 | 数据爬取，数据预处理，模型评估     |



### 1. 题目介绍

在b站、爱奇艺等视频网站中，用户观看视频的数量往往关乎着网站的收益。为了增大用户观看量，视频网站会使用推荐系统向用户推荐其可能感兴趣的视频，引诱用户观看。因此，一个高质量的推荐系统不仅能为网站带来更多的收益，也能为用户带来良好的体验。

![](https://ws1.sinaimg.cn/large/005J7jqOly1g5nx5epfstj30qu0a1q3l.jpg)

在2019年4月的一次Bilibili源码泄漏事件中，B站的视频推荐算法被人解读了出来，其中对于视频的各类特征的权重占比仅针对视频的播放属性而言，例如播放量、点攒数、分享数等，如果直接套用到番剧推荐上，缺少对番剧本身特有的特征关联，如番剧的声优阵容，画师等。

在本项目中，我们设计并实现了一个b站番剧推荐系统，为了保证推荐的准确性，我们综合用户行为和番剧特征两个方面来进行推荐。其中，用户行为包括用户的关注、点赞、收藏记录等，番剧特征包括番剧的标签、评分、声优、画师阵容等其它属性。最终，我们将用b站的真实数据集来评估系统的推荐效果。



### 2. 模型描述



### 3. 数据处理

#### 缺失值处理

缺失值主要来源于爬虫爬取数据过程中的意外操作，如用户的隐私设置了非公开，番剧被下架，用户本身处于[小黑屋](https://www.bilibili.com/blackboard/blackroomrule_v16.html)状态，都有一定可能导致数据的缺失。此外，由于B站本身的反爬机制，所以在高速爬取时会被IP限制，所以使用IP池的方法进行绕过时，代理IP的不稳定性也可能导致一定量的数据缺失，但是比例较小，所以可以忽略不计。

对于这类缺失值的处理方法一般采用直接丢弃的方法，因为缺失的数据占比较小，且大多数缺失数据本身不具有特征倾向，所以直接丢弃即可。但是对于被下架番剧的信息缺失，可以考虑从百度快照等缓存网站获取最近一次的缓存信息进行补充。而由于代理IP出现的信息缺失情况，在爬虫的中间件部分设置了缺失重爬的逻辑，所以只需要在最后的爬取结果中进行一次去重操作即可。



#### 非法数据处理

B站本身的数据其实也存在一定的错误率，例如在声优及职员列表中，经常出现中英符号混用，非严格的职员-角色格式，以及已注销用户仍然可以得到有效数据，这部分数据其实不应该出现在最终的用户数据中。由于这类情况出现较少，且缺少可以过滤的规则，所以只能手动对这部分数据处理。

此外，由于对于用户数据的爬取是bfs的方式进行的，所以得到“低等级”用户有非常多，有很大一部分这样的用户是广告号，所以为了尽量减少这类账号对数据整体的影响，设置了一定的规则进行过滤，如2级以下的用户数据将不被归纳到最终的数据集中，此外，[节操值](https://www.bilibili.com/blackboard/help.html#%E8%8A%82%E6%93%8D%E7%9B%B8%E5%85%B3?id=b177a87e1e714e2ea734f8a64f4e1da2)低于阈值（50）的用户也将被规则过滤出去。



### 4. 结果分析



### 5. 小结



###### 项目地址：[BilibiliCrawler](https://github.com/crazywkb/BilibiliCrawler)